import{j as o}from"./jsx-runtime.236aeee0.js";import{g as b,G as v,a as h,o as a,F as j}from"./errores.87700437.js";import{a as N}from"./client.595546ea.js";import{N as f}from"./config.a3d1421f.js";import{A as m}from"./_astro-entry_sonner.dae5ec25.js";import"./index.9e3bb68e.js";import"./index.ec3c183f.js";function k({className:t=""}){return o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"48px",height:"48px",className:t,children:[o.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),o.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),o.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),o.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}function C({className:t=""}){return o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`icon icon-tabler icon-tabler-brand-facebook ${t}`,width:"44",height:"44",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),o.jsx("path",{d:"M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3"})]})}function I({urlFetch:t,action:y,idBtnGoogle:l,idBtnFacebook:u}){const p=b(N);async function g(){const c=new v;document.body.classList.add("opacity-10"),document.body.classList.add("pointer-events-none");try{const e=await h(p,c),d=await e.user.getIdToken(),s={...e.user},r=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:JSON.stringify({user:s,uid:s.uid})}),{resDb:i,error:n}=await r.json();if(console.log({resDb:i}),r.status===200&&i._id){const w={uid:e.user.uid,displayName:e.user.displayName,email:e.user.email,photoUrl:e.user.photoURL,_id:i._id.toString()};localStorage.setItem(`${f}-userData`,JSON.stringify(w)),window.location.assign("/feed")}if(n)return console.log(n),m.error(a(n),{position:"top-center",className:"bg-rose-600 text-rose-900"})}catch(e){if(e.code==="auth/popup-closed-by-user")return;e.code&&(a(e.code)==="Ocurrio un error desconocido"&&alert(JSON.stringify(e)),m.error(a(e),{position:"top-center",className:"bg-rose-600 text-rose-900"}))}finally{document.body.classList.remove("opacity-10"),document.body.classList.remove("pointer-events-none")}}async function x(){document.body.classList.add("opacity-10"),document.body.classList.add("pointer-events-none");const c=new j;try{const e=await h(p,c),d=await e.user.getIdToken(),s={...e.user},r=await fetch(t,{method:"POST",headers:{Authorization:`Bearer ${d}`},body:JSON.stringify({user:s,uid:s.uid})}),{resDb:i}=await r.json();if(r.status===200){const n={uid:e.user.uid,displayName:e.user.displayName,email:e.user.email,photoUrl:e.user.photoURL,_id:i._id};localStorage.setItem(`${f}-userData`,JSON.stringify(n)),window.location.assign("/feed")}}catch(e){if(console.log(e),e.code==="auth/popup-closed-by-user")return;a(e.code)}finally{document.body.classList.remove("opacity-10"),document.body.classList.remove("pointer-events-none")}}return o.jsxs("div",{id:"containerBtns","data-action":y,className:"flex justify-around gap-5 px-5",children:[o.jsx("button",{onClick:()=>{g()},"data-url":t,id:l,"data-id":l,className:"flex-grow flex justify-center rounded bg-white",children:o.jsx(k,{"client:only":!0,className:"py-1"})}),o.jsx("button",{onClick:()=>{x()},"data-url":t,id:u,"data-id":u,className:"flex-grow flex justify-center rounded bg-blue-700",children:o.jsx(C,{"client:only":!0,className:"py-1"})})]})}export{I as BotonesAuth};
