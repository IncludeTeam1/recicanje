import{j as s}from"./jsx-runtime.236aeee0.js";import{r}from"./index.9e3bb68e.js";import{A as m}from"./AvatarUser.034f5ec7.js";import{N as x}from"./config.a3d1421f.js";function S({user:p={},limit:d=4}){const[a,u]=r.useState([]),[f,n]=r.useState(!0),[i,o]=r.useState(!1),l=JSON.parse(localStorage.getItem(`${x}-userData`));function c(){n(!0),fetch(`/api/usuarios/obtenerSugerencias?limit=${d}&_id=${l._id}`).then(e=>e.json()).then(({usuarios:e})=>{u(e)}).catch(e=>{console.log(e)}).finally(()=>{n(!1)})}r.useEffect(()=>{c()},[]);async function h(e){o(!0);try{const t=await fetch("/api/usuarios/conectarUsuario",{method:"POST",body:JSON.stringify({usuarioInSesion:l._id,usuarioAConectar:e._id})}),g=await t.json();t.status===200&&c()}catch(t){console.log(t)}finally{o(!1)}}return s.jsx("article",{className:" hidden lg:flex lg:w-[200px] xl:w-[250px] flex-shrink-0 rounded-xl overflow-hidden bg-white shadow-md ",children:f?s.jsx("p",{className:"text-center grid animate-pulse place-content-center w-full min-h-[100px]",children:"Cargando..."}):a?.length<1?s.jsx("div",{className:"p-2",children:s.jsx("p",{className:" text-center",children:"No hay personas"})}):s.jsxs("div",{className:"flex flex-col  w-full gap-3 ",children:[a.map(e=>s.jsxs("div",{className:`flex items-center justify-between gap-2 p-3\r
              hover:bg-gray-100 w-full  cursor-pointer transition`,children:[s.jsx("a",{href:`/perfil/${e.uid}`,className:`flex items-center justify-between gap-2 \r
                  hover:bg-gray-100 w-full  cursor-pointer transition\r
                  `,children:s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx(m,{className:"w-8 h-8",user:e}),s.jsxs("p",{className:"text-sm",children:[" ",e.displayName," "]})]})}),s.jsx("button",{disabled:i,onClick:()=>{h(e)},className:`bg-sky-600 rounded-full p-1 text-center text-sm ${i&&"opacity-70 cursor-wait"} hover:scale-95 brightness-105 transition-all`,children:"➕"})]},e.uid+e._id)),s.jsx("a",{href:"/mi-red",className:`text-center text-sm underline underline-offset-2 pb-2 \r
            hover:text-sky-600 hover:scale-105 transition\r
            `,children:"Mostrar más"})]})})}export{S as SugerenciasContactos};
