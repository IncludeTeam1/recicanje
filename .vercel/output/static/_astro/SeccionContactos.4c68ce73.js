import{j as e}from"./jsx-runtime.236aeee0.js";import{r as m}from"./index.9e3bb68e.js";import{N as j}from"./config.a3d1421f.js";import{B as p}from"./BotonAccion.7f0b3692.js";import{A as y}from"./AvatarUser.034f5ec7.js";import{A as f}from"./_astro-entry_sonner.dae5ec25.js";import{R as N}from"./ReciclarIcon.b936007b.js";import"./index.ec3c183f.js";const S="https://img.freepik.com/vector-premium/patron-fisuras-reciclaje-separacion-basura-co2-concepto-cambio-climatico-doodle-vectorial_414360-2797.jpg";function x({handleClik:t,usuario:i,type:l="Sugerencia"}){const d={Sugerencia:"âž• Conectar",Pendiente:"ðŸ•— Pendiente",Confirmar:"âœ… Confirmar"},r={Sugerencia:`border border-emerald-600 text-emerald-700
    px-3 py-2 rounded-3xl  hover:text-white hover:border-white hover:bg-emerald-600 transition`,Pendiente:`border border-gray-600 
    px-3 py-2 rounded-3xl  text-white hover:border-white hover:bg-gray-400 bg-gray-600 transition`,Confirmar:`border border-emerald-600 text-emerald-700 bg-emerald-100 
    px-3 py-2 rounded-3xl  hover:text-white hover:border-white hover:bg-emerald-600 transition`};return e.jsxs("div",{className:"relative bg-white shadow-md rounded-md p-5  flex flex-col items-center justify-between ",children:[e.jsx("div",{className:"h-[80px] bg-cover aspect-video bg-no-repeat w-full bg-center absolute ",style:{backgroundImage:`url(${i.portadaURL||S})`}}),e.jsxs("a",{href:`/perfil/${i.uid}`,className:"flex flex-col items-center justify-center text-center",children:[e.jsx(y,{user:i,className:"w-24 h-24 z-10 translate-y-2"}),e.jsx("p",{className:"pt-3 hover:underline underline-offset-2 transition",children:i.displayName})]}),e.jsxs("button",{className:r[l],onClick:()=>{t(i)},children:[" ",d[l]]})]})}const a={pendiente:"Pendiente",sugerencia:"Sugerencia",confirmar:"Confirmar"},w={pendiente:"Solicitudes enviadas",sugerencia:"Gente que quizas conozcas.",confirmar:"Solicitudes recibidas"};function I(){const[t,i]=m.useState([]),[l,d]=m.useState(!1),[r,o]=m.useState(a.sugerencia),u=JSON.parse(localStorage.getItem(`${j}-userData`));m.useEffect(()=>{let s="/api/usuarios/obtenerSugerencias";r===a.pendiente?s="/api/usuarios/obtenerPendientes":r===a.confirmar&&(s="/api/usuarios/obtenerConfirmar"),d(!0),fetch(s,{method:"POST",body:JSON.stringify({user_id:u._id})}).then(n=>n.json()).then(({usuarios:n})=>{i(n)}).catch(n=>{console.log(n)}).finally(()=>{d(!1)})},[r]);async function h(s){const c=await(await fetch("/api/usuarios/conectarUsuario",{method:"POST",body:JSON.stringify({usuarioInSesion:u._id,usuarioAConectar:s._id})})).json();o(a.pendiente),f.success(c.msg)}async function g(s){const c=await(await fetch("/api/usuarios/conectarUsuario",{method:"DELETE",body:JSON.stringify({usuarioInSesion:u._id,usuarioAConectar:s._id})})).json();o(a.sugerencia),f.success(c.msg)}async function b(s){const c=await(await fetch("/api/usuarios/conectarUsuario",{method:"PUT",body:JSON.stringify({usuarioInSesion:u._id,usuarioAConectar:s._id})})).json();console.log(c),f.success(c.msg),o(a.sugerencia)}return e.jsxs("section",{className:"border p-5 w-full bg-white",children:[e.jsx("h2",{className:`text-xl md:text-2xl font-semibold \r
      bg-gradient-to-r from-teal-400 to-teal-800 bg-clip-text text-transparent \r
      `,children:w[r.toLowerCase()]}),e.jsxs("div",{className:"flex justify-around py-2",children:[e.jsx(p,{onClick:()=>o(a.sugerencia),className:`${r===a.sugerencia?"scale-105 shadow-xl border":""}`,children:"Sugerencias"}),e.jsx(p,{onClick:()=>o(a.pendiente),className:`${r===a.pendiente?"scale-105 shadow-xl border":""}`,children:"Pendientes"}),e.jsx(p,{onClick:()=>o(a.confirmar),className:`${r===a.confirmar?"scale-105 shadow-xl border":""}`,children:"Recibidas"})]}),l?e.jsx("div",{className:"animate-spin flex justify-center",children:e.jsx(N,{className:"w-20 h-20 stroke-teal-950 animate-spin"})}):e.jsxs("div",{className:"w-full  grid grid-cols-[repeat(auto-fill,minmax(220px,1fr))] gap-2",children:[r===a.sugerencia&&(t.length>0?t.map(s=>e.jsx(x,{handleClik:h,type:r,usuario:s},s._id)):e.jsx("div",{className:"text-xl text-center flex justify-center col-span-2 md:col-span-3 lg:col-span-4  w-full",children:e.jsx("p",{children:"No hay contactos"})})),r===a.pendiente&&(t.length>0?t.map(s=>e.jsx(x,{type:r,handleClik:g,usuario:s},s._id)):e.jsx("div",{className:"text-xl text-center flex justify-center col-span-2 md:col-span-3 lg:col-span-4  w-full",children:e.jsx("p",{children:"No hay contactos pendientes"})})),r===a.confirmar&&(t.length>0?t.map(s=>e.jsx(x,{type:r,handleClik:b,usuario:s},s._id)):e.jsx("div",{className:"text-xl text-center flex justify-center col-span-2 md:col-span-3 lg:col-span-4  w-full",children:e.jsx("p",{children:"No hay usuarios a confirmar"})}))]})]})}export{I as SeccionContactos};
